"use strict";(self.webpackChunkpity=self.webpackChunkpity||[]).push([[9722],{51042:function(T,g,e){var m=e(1413),o=e(67294),E=e(42110),u=e(84089),j=function(v,h){return o.createElement(u.Z,(0,m.Z)((0,m.Z)({},v),{},{ref:h,icon:E.Z}))},i=o.forwardRef(j);g.Z=i},646:function(T,g,e){var m=e(86738),o=e(85893);g.Z=function(E){var u=E.title,j=E.text,i=E.onConfirm;return(0,o.jsx)(m.Z,{title:u,onConfirm:i,children:(0,o.jsx)("a",{children:j})})}},84298:function(T,g,e){var m=e(97857),o=e.n(m),E=e(5574),u=e.n(E),j=e(67294),i=e(8232),D=e(17788),v=e(15746),h=e(76081),p=e(85893),_=i.Z.Item,M=function(s){var K=s.title,S=s.width,b=s.left,A=s.right,$=s.formName,P=s.record,I=s.onFinish,V=s.loading,N=s.fields,n=s.open,B=s.onCancel,L=s.offset,z=L===void 0?0:L,G=s.children,Z=s.Footer,Y=s.onTest,H=i.Z.useForm(),d=u()(H,1),c=d[0],f=function(){c.validateFields().then(function(F){I(F)})};(0,j.useEffect)(function(){c.resetFields(),c.setFieldsValue(P)},[P]);var x={labelCol:{span:b},wrapperCol:{span:A}};return(0,p.jsxs)(D.Z,{style:{marginTop:z},confirmLoading:V,footer:Z!==void 0?(0,p.jsx)(Z,{onOk:f,onCancel:B,onTest:function(){c.validateFields().then(function(F){Y(F)})}}):void 0,title:K,width:S,open:n,onOk:f,onCancel:B,children:[G||null,(0,p.jsx)(i.Z,o()(o()({form:c},x),{},{name:$,initialValues:P,onFinish:I,children:N.map(function(t,F){return(0,p.jsx)(v.Z,{span:t.span||24,children:(0,p.jsx)(_,{label:t.label,colon:t.colon||!0,initialValue:t.initialValue,rules:[{required:t.required,message:t.message}],name:t.name,valuePropName:t.valuePropName||"value",children:(0,h.Z)(t.type,t.placeholder,t.component)})},F)})}))]})};g.Z=M},76081:function(T,g,e){var m=e(55102),o=e(72269),E=e(67294),u=e(85893),j=m.Z.TextArea,i=function(v,h){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;return p||(v==="input"?(0,u.jsx)(m.Z,{placeholder:h}):v==="textarea"?(0,u.jsx)(j,{placeholder:h}):v==="switch"?(0,u.jsx)(o.Z,{}):null)};g.Z=i},66815:function(T,g,e){e.r(g),e.d(g,{default:function(){return H}});var m=e(97857),o=e.n(m),E=e(15009),u=e.n(E),j=e(99289),i=e.n(j),D=e(5574),v=e.n(D),h=e(67294),p=e(58841),_=e(90596),M=e(34041),y=e(8232),s=e(66309),K=e(96074),S=e(4393),b=e(71230),A=e(15746),$=e(14726),P=e(55102),I=e(72051),V=e(19478),N=e(83062),n=e(85893),B=function(d){var c=d.icon,f=d.title,x=d.font,t=d.style,F=d.text,J=d.onClick;return(0,n.jsx)(N.Z,{title:f,children:(0,n.jsxs)("span",{onClick:J,style:o()({cursor:"pointer",fontSize:x},t),children:[c," ",F]})})},L=e(51042),z=e(84298),G=e(646),Z=M.Z.Option,Y=function(c){var f=c.loading,x=c.gconfig,t=c.dispatch,F=y.Z.useForm(),J=v()(F,1),Q=J[0],X=x.envList,ne=x.envMap,te=x.addressList,ae=(0,h.useState)(!1),w=v()(ae,2),re=w[0],U=w[1],se=(0,h.useState)({}),k=v()(se,2),R=k[0],q=k[1],oe=function(){t({type:"gconfig/fetchEnvList",payload:{page:1,size:1e3,exactly:!0}})},W=function(){var l=Q.getFieldsValue();t({type:"gconfig/fetchAddress",payload:l})},ue=f.effects["gconfig/fetchAddress"]||f.effects["gconfig/fetchEnvList"]||f.effects["gconfig/updateAddress"]||f.effects["gconfig/insertAddress"]||f.effects["gconfig/deleteAddress"];(0,h.useEffect)(function(){oe(),W()},[]);var le=[{title:"\u73AF\u5883",key:"env",dataIndex:"env",render:function(l){return(0,n.jsx)(s.Z,{children:ne[l]})}},{title:"\u540D\u79F0",key:"name",dataIndex:"name"},{title:(0,n.jsx)(B,{title:"\u5730\u5740\u4E00\u822C\u662F\u670D\u52A1\u7684\u57FA\u7840\u5730\u5740\uFF0C\u6BD4\u5982https://api.baidu.com, \u7528\u4F8B\u4E2D\u7684\u5730\u5740\u7B80\u5199\u5373\u53EF",text:"\u5730\u5740"}),key:"gateway",dataIndex:"gateway",render:function(l){return(0,n.jsx)("a",{href:l,children:l})},ellipsis:!0},{title:"\u64CD\u4F5C",key:"operation",render:function(l,C){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("a",{onClick:function(){q(C),U(!0)},children:"\u7F16\u8F91"}),(0,n.jsx)(K.Z,{type:"vertical"}),(0,n.jsx)(G.Z,{text:"\u5220\u9664",title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u4E2A\u5730\u5740\u5417?",onConfirm:i()(u()().mark(function O(){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,de(C);case 2:case"end":return a.stop()}},O)}))})]})}}],ie=[{name:"env",label:"\u73AF\u5883",required:!0,message:"\u8BF7\u9009\u62E9\u5BF9\u5E94\u73AF\u5883",type:"select",component:(0,n.jsx)(M.Z,{placeholder:"\u8BF7\u9009\u62E9\u5BF9\u5E94\u73AF\u5883",children:X.map(function(r){return(0,n.jsx)(Z,{value:r.id,children:r.name},r.id)})})},{name:"name",label:"\u5730\u5740\u540D\u79F0",required:!0,message:"\u8BF7\u8F93\u5165\u5730\u5740\u540D\u79F0",type:"input",placeholder:"\u8BF7\u8F93\u5165\u5730\u5740\u540D\u79F0"},{name:"gateway",label:"\u670D\u52A1\u5730\u5740",required:!0,message:"\u8BF7\u8F93\u5165\u670D\u52A1\u5730\u5740",type:"input",placeholder:"\u8BF7\u8F93\u5165\u670D\u52A1\u5730\u5740"}],de=function(){var r=i()(u()().mark(function l(C){var O;return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t({type:"gconfig/deleteAddress",payload:{id:C.id}});case 2:O=a.sent,O&&W();case 4:case"end":return a.stop()}},l)}));return function(C){return r.apply(this,arguments)}}(),ce=function(){var r=i()(u()().mark(function l(C){var O;return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!R.id){a.next=6;break}return a.next=3,t({type:"gconfig/updateAddress",payload:o()(o()({},C),{},{id:R.id})});case 3:O=a.sent,a.next=9;break;case 6:return a.next=8,t({type:"gconfig/insertAddress",payload:C});case 8:O=a.sent;case 9:O&&(U(!1),W());case 10:case"end":return a.stop()}},l)}));return function(C){return r.apply(this,arguments)}}();return(0,n.jsx)(p._z,{breadcrumb:null,title:"\u8BF7\u6C42\u5730\u5740\u7BA1\u7406",children:(0,n.jsxs)(S.Z,{children:[(0,n.jsx)(z.Z,{open:re,fields:ie,title:R.id?"\u4FEE\u6539\u5730\u5740":"\u6DFB\u52A0\u5730\u5740",left:6,right:18,record:R,onFinish:ce,onCancel:function(){return U(!1)}}),(0,n.jsx)(y.Z,o()(o()({form:Q},V.Z.LAYOUT),{},{onValuesChange:W,children:(0,n.jsxs)(b.Z,{gutter:12,children:[(0,n.jsx)(A.Z,{span:3,children:(0,n.jsx)(y.Z.Item,{children:(0,n.jsxs)($.ZP,{type:"primary",onClick:function(){U(!0),q({})},children:[(0,n.jsx)(L.Z,{}),"\u6DFB\u52A0\u5730\u5740"]})})}),(0,n.jsx)(A.Z,{span:7,children:(0,n.jsx)(y.Z.Item,{label:"\u73AF\u5883",name:"env",children:(0,n.jsx)(M.Z,{allowClear:!0,showSearch:!0,placeholder:"\u9009\u62E9\u5BF9\u5E94\u7684\u73AF\u5883",children:X.map(function(r){return(0,n.jsx)(Z,{value:r.id,children:r.name},r.id)})})})}),(0,n.jsx)(A.Z,{span:7,children:(0,n.jsx)(y.Z.Item,{label:"\u540D\u79F0",name:"name",children:(0,n.jsx)(P.Z,{placeholder:"\u8F93\u5165\u5BF9\u5E94\u7684\u5730\u5740\u540D\u79F0"})})}),(0,n.jsx)(A.Z,{span:7,children:(0,n.jsx)(y.Z.Item,{label:"\u5730\u5740",name:"gateway",children:(0,n.jsx)(P.Z,{placeholder:"\u8F93\u5165\u5BF9\u5E94\u7684\u5730\u5740"})})})]})})),(0,n.jsx)(I.Z,{columns:le,loading:ue,rowKey:function(l){return l.id},dataSource:te})]})})},H=(0,_.connect)(function(d){var c=d.gconfig,f=d.user,x=d.loading;return{gconfig:c,user:f,loading:x}})((0,h.memo)(Y))}}]);
