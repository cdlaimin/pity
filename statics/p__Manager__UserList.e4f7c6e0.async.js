"use strict";(self.webpackChunkpity=self.webpackChunkpity||[]).push([[2085],{12554:function(F,I,e){e.d(I,{Z:function(){return P}});var C=e(67294),j=e(7134),c=e(83062),M={menu:"menu___lmCy5",right:"right___j6QWS",action:"action___qDzB9",search:"search___XbFIL",account:"account___t6Nrx",avatar:"avatar___B76fn",dark:"dark___VDMBa","ant-badge-count-sm":"ant-badge-count-sm___oPFlX"},D=e(19478),L=Object.defineProperty,v=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable,m=(s,u,a)=>u in s?L(s,u,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[u]=a,N=(s,u)=>{for(var a in u||(u={}))S.call(u,a)&&m(s,a,u[a]);if(v)for(var a of v(u))U.call(u,a)&&m(s,a,u[a]);return s};const K=s=>React.createElement("svg",N({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500",xmlSpace:"preserve"},s),React.createElement("linearGradient",{id:"logo_svg__a",gradientUnits:"userSpaceOnUse",x1:413.111,y1:255.835,x2:145.446,y2:255.835},React.createElement("stop",{offset:.034,style:{stopColor:"#e700e6"}}),React.createElement("stop",{offset:1,style:{stopColor:"#29abe2"}})),React.createElement("path",{fill:"url(#logo_svg__a)",d:"m475.4 248.3-93.7-124.9c0-.1-.1-.1-.2-.2-.2-.2-.4-.5-.6-.7l-.3-.3-.8-.8c-.1 0-.1-.1-.2-.2-.3-.3-.7-.5-1.1-.8-.1-.1-.2-.1-.3-.2-.3-.2-.6-.4-.9-.5-.1-.1-.2-.1-.4-.2-.3-.1-.6-.3-.9-.4-.1 0-.3-.1-.4-.1l-.9-.3c-.1 0-.3-.1-.4-.1-.3-.1-.7-.1-1-.2-.1 0-.2 0-.4-.1-.5-.1-.9-.1-1.4-.1H117.6c-6.9 0-12.5 5.6-12.5 12.5s5.6 12.5 12.5 12.5h79.5c4.8 0 8.7 3.9 8.7 8.8 0 2.4-1 4.6-2.6 6.2-1.6 1.6-3.8 2.6-6.2 2.6H72.2c-6.9 0-12.5 5.6-12.5 12.5s5.6 12.5 12.5 12.5h90.1c7.6 0 13.7 6.2 13.7 13.7 0 3.8-1.5 7.2-4 9.7-2.5 2.5-5.8 4-9.6 4H28.5c-6.9 0-12.5 5.6-12.5 12.5s5.6 12.5 12.5 12.5h83.3c9.6 0 17.5 7.9 17.5 17.5 0 4.8-2 9.2-5.1 12.4-3.2 3.2-7.5 5.1-12.3 5.1h-52c-6.9 0-12.5 5.6-12.5 12.5s5.6 12.5 12.5 12.5H157c3.9 0 7.5 1.2 10.4 3.3 3.4 2.3 6.1 5.8 7.3 9.8.6 1.8.9 3.7.9 5.8 0 5.2-2.1 9.9-5.5 13.3-3.4 3.4-8.1 5.5-13.3 5.5H123c-6.9 0-12.5 5.6-12.5 12.5s5.6 12.5 12.5 12.5H201.9c2 0 3.6 1.6 3.6 3.6 0 1-.4 1.9-1.1 2.6-.6.7-1.6 1.1-2.5 1.1h-17.1c-6.9 0-12.5 5.6-12.5 12.5s5.6 12.5 12.5 12.5h186.8c.5 0 1 0 1.5-.1s.9-.1 1.3-.2c.1 0 .1 0 .2-.1.4-.1.8-.2 1.1-.3.1 0 .2-.1.2-.1.4-.1.7-.3 1-.4.1 0 .2-.1.2-.1.3-.2.7-.4 1-.6.1 0 .1-.1.2-.1.4-.3.8-.5 1.1-.8l.1-.1c.3-.3.6-.5.9-.8l.3-.3c.2-.2.4-.4.6-.7l.2-.2 93.7-124.9c3.5-4.5 3.5-10.6.2-15.1zM288 143.4h58.7l-37.5 50-37.5-50H288zm-109.2 98.8 13-17.3 34.7-46.4 5.3-7.1 14.9-19.8 6.3 8.4 40.5 54-21.9 29.2H178l.8-1zM253 368.3l-15.8-21-40.6-54.1-9.9-13.2-8.7-11.6h93.7l75 100H253zm169.3-75.8L392 255.8l-13.4 19.1 29.9 36.1-36.7 49-78.1-104.1 78.1-104.1 78.1 104.1-27.6 36.6z"}),React.createElement("linearGradient",{id:"logo_svg__b",gradientUnits:"userSpaceOnUse",x1:413.111,y1:166.309,x2:145.445,y2:166.309},React.createElement("stop",{offset:.034,style:{stopColor:"#e700e6"}}),React.createElement("stop",{offset:1,style:{stopColor:"#29abe2"}})),React.createElement("path",{fill:"url(#logo_svg__b)",d:"M331.9 152.6h-42.7l20.6 27.4z"}));var O="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MDAgNTAwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48bGluZWFyR3JhZGllbnQgaWQ9ImEiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4MT0iNDEzLjExMSIgeTE9IjI1NS44MzUiIHgyPSIxNDUuNDQ2IiB5Mj0iMjU1LjgzNSI+PHN0b3Agb2Zmc2V0PSIuMDM0IiBzdHlsZT0ic3RvcC1jb2xvcjojZTcwMGU2Ii8+PHN0b3Agb2Zmc2V0PSIxIiBzdHlsZT0ic3RvcC1jb2xvcjojMjlhYmUyIi8+PC9saW5lYXJHcmFkaWVudD48cGF0aCBmaWxsPSJ1cmwoI2EpIiBkPSJtNDc1LjQgMjQ4LjMtOTMuNy0xMjQuOWMwLS4xLS4xLS4xLS4yLS4yLS4yLS4yLS40LS41LS42LS43bC0uMy0uMy0uOC0uOGMtLjEgMC0uMS0uMS0uMi0uMi0uMy0uMy0uNy0uNS0xLjEtLjgtLjEtLjEtLjItLjEtLjMtLjItLjMtLjItLjYtLjQtLjktLjUtLjEtLjEtLjItLjEtLjQtLjItLjMtLjEtLjYtLjMtLjktLjQtLjEgMC0uMy0uMS0uNC0uMWwtLjktLjNjLS4xIDAtLjMtLjEtLjQtLjEtLjMtLjEtLjctLjEtMS0uMi0uMSAwLS4yIDAtLjQtLjEtLjUtLjEtLjktLjEtMS40LS4xSDExNy42Yy02LjkgMC0xMi41IDUuNi0xMi41IDEyLjVzNS42IDEyLjUgMTIuNSAxMi41aDc5LjVjNC44IDAgOC43IDMuOSA4LjcgOC44IDAgMi40LTEgNC42LTIuNiA2LjItMS42IDEuNi0zLjggMi42LTYuMiAyLjZINzIuMmMtNi45IDAtMTIuNSA1LjYtMTIuNSAxMi41czUuNiAxMi41IDEyLjUgMTIuNWg5MC4xYzcuNiAwIDEzLjcgNi4yIDEzLjcgMTMuNyAwIDMuOC0xLjUgNy4yLTQgOS43LTIuNSAyLjUtNS44IDQtOS42IDRIMjguNWMtNi45IDAtMTIuNSA1LjYtMTIuNSAxMi41czUuNiAxMi41IDEyLjUgMTIuNWg4My4zYzkuNiAwIDE3LjUgNy45IDE3LjUgMTcuNSAwIDQuOC0yIDkuMi01LjEgMTIuNC0zLjIgMy4yLTcuNSA1LjEtMTIuMyA1LjFoLTUyYy02LjkgMC0xMi41IDUuNi0xMi41IDEyLjVzNS42IDEyLjUgMTIuNSAxMi41SDE1N2MzLjkgMCA3LjUgMS4yIDEwLjQgMy4zIDMuNCAyLjMgNi4xIDUuOCA3LjMgOS44LjYgMS44LjkgMy43LjkgNS44IDAgNS4yLTIuMSA5LjktNS41IDEzLjMtMy40IDMuNC04LjEgNS41LTEzLjMgNS41SDEyM2MtNi45IDAtMTIuNSA1LjYtMTIuNSAxMi41czUuNiAxMi41IDEyLjUgMTIuNUgyMDEuOWMyIDAgMy42IDEuNiAzLjYgMy42IDAgMS0uNCAxLjktMS4xIDIuNi0uNi43LTEuNiAxLjEtMi41IDEuMWgtMTcuMWMtNi45IDAtMTIuNSA1LjYtMTIuNSAxMi41czUuNiAxMi41IDEyLjUgMTIuNWgxODYuOGMuNSAwIDEgMCAxLjUtLjFzLjktLjEgMS4zLS4yYy4xIDAgLjEgMCAuMi0uMS40LS4xLjgtLjIgMS4xLS4zLjEgMCAuMi0uMS4yLS4xLjQtLjEuNy0uMyAxLS40LjEgMCAuMi0uMS4yLS4xLjMtLjIuNy0uNCAxLS42LjEgMCAuMS0uMS4yLS4xLjQtLjMuOC0uNSAxLjEtLjhsLjEtLjFjLjMtLjMuNi0uNS45LS44bC4zLS4zYy4yLS4yLjQtLjQuNi0uN2wuMi0uMiA5My43LTEyNC45YzMuNS00LjUgMy41LTEwLjYuMi0xNS4xek0yODggMTQzLjRoNTguN2wtMzcuNSA1MC0zNy41LTUwSDI4OHptLTEwOS4yIDk4LjggMTMtMTcuMyAzNC43LTQ2LjQgNS4zLTcuMSAxNC45LTE5LjggNi4zIDguNCA0MC41IDU0LTIxLjkgMjkuMkgxNzhsLjgtMXpNMjUzIDM2OC4zbC0xNS44LTIxLTQwLjYtNTQuMS05LjktMTMuMi04LjctMTEuNmg5My43bDc1IDEwMEgyNTN6bTE2OS4zLTc1LjhMMzkyIDI1NS44bC0xMy40IDE5LjEgMjkuOSAzNi4xLTM2LjcgNDktNzguMS0xMDQuMSA3OC4xLTEwNC4xIDc4LjEgMTA0LjEtMjcuNiAzNi42eiIvPjxsaW5lYXJHcmFkaWVudCBpZD0iYiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSI0MTMuMTExIiB5MT0iMTY2LjMwOSIgeDI9IjE0NS40NDUiIHkyPSIxNjYuMzA5Ij48c3RvcCBvZmZzZXQ9Ii4wMzQiIHN0eWxlPSJzdG9wLWNvbG9yOiNlNzAwZTYiLz48c3RvcCBvZmZzZXQ9IjEiIHN0eWxlPSJzdG9wLWNvbG9yOiMyOWFiZTIiLz48L2xpbmVhckdyYWRpZW50PjxwYXRoIGZpbGw9InVybCgjYikiIGQ9Ik0zMzEuOSAxNTIuNmgtNDIuN2wyMC42IDI3LjR6Ii8+PC9zdmc+",i=e(85893),P=function(s){var u=s.user,a=s.size,f=a===void 0?24:a,g=s.marginLeft,x=g===void 0?6:g;return u===void 0?(0,i.jsx)(j.C,{size:f,src:O,alt:"avatar"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(j.C,{size:f,className:M.avatar,src:u.avatar||D.Z.AVATAR_URL,alt:"avatar"}),(0,i.jsx)(c.Z,{title:"\u70B9\u51FB\u53EF\u67E5\u770B\u7528\u6237\u8D44\u6599",children:u.deleted_at?(0,i.jsx)("del",{children:(0,i.jsx)("a",{style:{marginLeft:x,fontSize:13,color:"#ccc"},href:"/#/member/".concat(u.id),rel:"noreferrer",children:u.name})}):(0,i.jsx)("a",{onClick:function(b){b.stopPropagation()},style:{marginLeft:x,fontSize:13,verticalAlign:"middle"},href:"/#/member/".concat(u.id),rel:"noreferrer",children:u.name})})]})}},646:function(F,I,e){var C=e(86738),j=e(85893);I.Z=function(c){var M=c.title,D=c.text,L=c.onConfirm;return(0,j.jsx)(C.Z,{title:M,onConfirm:L,children:(0,j.jsx)("a",{children:D})})}},16981:function(F,I,e){e.r(I);var C=e(19632),j=e.n(C),c=e(97857),M=e.n(c),D=e(15009),L=e.n(D),v=e(99289),S=e.n(v),U=e(5574),m=e.n(U),N=e(67294),K=e(58841),O=e(34041),i=e(8232),P=e(66309),s=e(72269),u=e(96074),a=e(4393),f=e(17788),g=e(55102),x=e(71230),h=e(15746),b=e(72051),G=e(90596),V=e(12554),z=e(19478),k=e(646),X=e(87547),t=e(85893),W=O.Z.Option,J=function(A){var T=A.user,y=A.dispatch,$=A.loading,q=(0,N.useState)(!1),Q=m()(q,2),ee=Q[0],R=Q[1],te=(0,N.useState)({}),H=m()(te,2),p=H[0],ue=H[1],ne=i.Z.useForm(),re=m()(ne,1),Z=re[0],se=function(n,r){y({type:"user/updateUser",payload:{id:r,is_valid:n}})},ae=function(){var _=S()(L()().mark(function n(r){var o;return L()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,y({type:"user/deleteUser",payload:{id:r}});case 2:o=l.sent,o&&Y();case 4:case"end":return l.stop()}},n)}));return function(r){return _.apply(this,arguments)}}(),ie=[{title:"id",dataIndex:"id",key:"id"},{title:(0,t.jsxs)("span",{children:[(0,t.jsx)(X.Z,{})," \u59D3\u540D"]}),dataIndex:"name",key:"name",render:function(n,r){return(0,t.jsx)(V.Z,{marginLeft:4,user:r})}},{title:"\u2709 \u90AE\u7BB1",dataIndex:"email",key:"email"},{title:"\u{1F3A8} \u89D2\u8272",dataIndex:"role",key:"role",render:function(n){return(0,t.jsx)(P.Z,{color:z.Z.USER_ROLE_TAG[n],children:z.Z.USER_ROLE[n]})}},{title:"\u4E0A\u6B21\u767B\u5F55",dataIndex:"last_login_at",key:"last_login_at"},{title:"\u{1F6AB} \u662F\u5426\u542F\u7528",dataIndex:"is_valid",key:"is_valid",render:function(n,r){return(0,t.jsx)(s.Z,{defaultChecked:n,onChange:function(d){se(d,r.id)}})}},{title:"\u{1F9F7} \u64CD\u4F5C",key:"ops",render:function(n,r){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("a",{onClick:function(){ue(r),Z.setFieldsValue(r),R(!0)},children:"\u7F16\u8F91"}),(0,t.jsx)(u.Z,{type:"vertical"}),(0,t.jsx)(k.Z,{onConfirm:S()(L()().mark(function o(){return L()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,ae(r.id);case 2:case"end":return l.stop()}},o)})),text:"\u5220\u9664",title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u7528\u6237\u5417?"})]})}}],_e=T.userList,w=T.currentUserList,Y=function(){y({type:"user/fetchUserList"})};(0,N.useEffect)(function(){Y()},[]);var oe=function(n){if(n===""){Y();return}var r=_e.filter(function(o){return o.name.toLowerCase().indexOf(n.toLowerCase())>-1||o.email.toLowerCase().indexOf(n.toLowerCase())>-1});y({type:"user/save",payload:{currentUserList:r}})},le=function(){var _=S()(L()().mark(function n(){var r,o,d;return L()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,Z.getFieldsValue();case 2:return r=E.sent,E.next=5,y({type:"user/updateUser",payload:M()(M()({},r),{},{id:p.id})});case 5:o=E.sent,o&&(d=j()(w),w.forEach(function(Me,Le){Me.id===p.id&&(d[Le]=M()(M()({},p),r))}),y({type:"user/save",payload:{currentUserList:d}}),R(!1));case 7:case"end":return E.stop()}},n)}));return function(){return _.apply(this,arguments)}}();return(0,t.jsx)(K._z,{breadcrumb:null,title:"\u7528\u6237\u7BA1\u7406\u9875\u9762",children:(0,t.jsxs)(a.Z,{children:[(0,t.jsx)(f.Z,{title:"\u7F16\u8F91\u7528\u6237",width:500,open:ee,onCancel:function(){return R(!1)},onOk:le,children:(0,t.jsxs)(i.Z,M()(M()({form:Z,initialValues:p},z.Z.LAYOUT),{},{children:[(0,t.jsx)(i.Z.Item,{label:"\u59D3\u540D",name:"name",children:(0,t.jsx)(g.Z,{placeholder:"\u8F93\u5165\u7528\u6237\u59D3\u540D"})}),(0,t.jsx)(i.Z.Item,{label:"\u90AE\u7BB1",name:"email",children:(0,t.jsx)(g.Z,{placeholder:"\u8F93\u5165\u7528\u6237\u90AE\u7BB1"})}),(0,t.jsx)(i.Z.Item,{label:"\u89D2\u8272",name:"role",children:(0,t.jsxs)(O.Z,{children:[(0,t.jsx)(W,{value:0,children:"\u666E\u901A\u6210\u5458"},0),(0,t.jsx)(W,{value:1,children:"\u7EC4\u957F"},1),(0,t.jsx)(W,{value:2,children:"\u8D85\u7EA7\u7BA1\u7406\u5458"},2)]})})]}))}),(0,t.jsxs)(x.Z,{style:{marginBottom:12},children:[(0,t.jsx)(h.Z,{span:18}),(0,t.jsx)(h.Z,{span:6,children:(0,t.jsx)(g.Z.Search,{placeholder:"\u8F93\u5165\u7528\u6237\u90AE\u7BB1\u6216\u59D3\u540D",onChange:function(n){oe(n.target.value)}})})]}),(0,t.jsx)(x.Z,{children:(0,t.jsx)(h.Z,{span:24,children:(0,t.jsx)(b.Z,{columns:ie,dataSource:w,loading:$.effects["user/fetchUserList"]})})})]})})};I.default=(0,G.connect)(function(B){var A=B.user,T=B.loading;return{user:A,loading:T}})(J)}}]);
