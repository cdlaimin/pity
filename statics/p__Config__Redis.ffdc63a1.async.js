"use strict";(self.webpackChunkpity=self.webpackChunkpity||[]).push([[4401],{51042:function(I,c,n){var m=n(1413),t=n(67294),i=n(42110),_=n(84089),D=function(E,B){return t.createElement(_.Z,(0,m.Z)((0,m.Z)({},E),{},{ref:B,icon:i.Z}))},o=t.forwardRef(D);c.Z=o},646:function(I,c,n){var m=n(86738),t=n(85893);c.Z=function(i){var _=i.title,D=i.text,o=i.onConfirm;return(0,t.jsx)(m.Z,{title:_,onConfirm:o,children:(0,t.jsx)("a",{children:D})})}},77619:function(I,c,n){n.r(c);var m=n(97857),t=n.n(m),i=n(15009),_=n.n(i),D=n(99289),o=n.n(D),y=n(5574),E=n.n(y),B=n(58841),v=n(34041),Z=n(66309),S=n(96074),u=n(8232),$=n(4393),V=n(71230),P=n(15746),f=n(55102),z=n(14726),G=n(17788),Y=n(37804),w=n(72051),H=n(90596),g=n(67294),R=n(19478),J=n(51042),N=n(646),e=n(85893),h=v.Z.Option,Q=function(j){var O=j.gconfig,X=j.loading,C=j.dispatch,b=O.envList,k=O.redisConfig,q=O.envMap,ee=(0,g.useState)(!1),U=E()(ee,2),ne=U[0],M=U[1],se=(0,g.useState)({}),W=E()(se,2),p=W[0],T=W[1],x=function(){var a=L.getFieldsValue();C({type:"gconfig/fetchRedisConfig",payload:a})},re=function(){C({type:"gconfig/fetchEnvList",payload:{page:1,size:1e3,exactly:!0}})},ue=function(){var r=o()(_()().mark(function a(l){var d;return _()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,C({type:"gconfig/deleteRedisConfig",payload:{id:l}});case 2:d=s.sent,d&&x();case 4:case"end":return s.stop()}},a)}));return function(l){return r.apply(this,arguments)}}();(0,g.useEffect)(function(){x(),re()},[]),(0,g.useEffect)(function(){F.resetFields(),F.setFieldsValue(p)},[p]);var ae=[{title:"\u73AF\u5883",key:"env",dataIndex:"env",render:function(a){return q[a]}},{title:"\u540D\u79F0",key:"name",dataIndex:"name"},{title:"\u5730\u5740",key:"addr",dataIndex:"addr"},{title:"\u7528\u6237\u540D",key:"username",dataIndex:"username"},{title:"\u5BC6\u7801",key:"password",dataIndex:"password"},{title:"\u7C7B\u578B",key:"cluster",dataIndex:"cluster",render:function(a){return a?(0,e.jsx)(Z.Z,{color:"blue",children:"\u96C6\u7FA4"}):(0,e.jsx)(Z.Z,{color:"green",children:"\u5B9E\u4F8B"})}},{title:"\u64CD\u4F5C",key:"ops",render:function(a,l){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("a",{onClick:function(){T(l),M(!0)},children:"\u7F16\u8F91"}),(0,e.jsx)(S.Z,{type:"vertical"}),(0,e.jsx)(N.Z,{text:"\u5220\u9664",title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8BE5redis\u914D\u7F6E\u5417?",onConfirm:o()(_()().mark(function d(){return _()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,ue(l.id);case 2:case"end":return s.stop()}},d)}))})]})}}],te=u.Z.useForm(),_e=E()(te,1),L=_e[0],le=u.Z.useForm(),de=E()(le,1),F=de[0],ie=function(){var r=o()(_()().mark(function a(){var l,d;return _()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,F.validateFields();case 2:if(l=s.sent,p.id){s.next=9;break}return s.next=6,C({type:"gconfig/insertRedisConfig",payload:l});case 6:d=s.sent,s.next=12;break;case 9:return s.next=11,C({type:"gconfig/updateRedisConfig",payload:t()(t()({},l),{},{id:p.id})});case 11:d=s.sent;case 12:d&&(M(!1),x());case 13:case"end":return s.stop()}},a)}));return function(){return r.apply(this,arguments)}}();return(0,e.jsx)(B._z,{title:"Redis\u914D\u7F6E",breadcrumb:null,children:(0,e.jsxs)($.Z,{children:[(0,e.jsx)(u.Z,t()(t()({form:L},R.Z.LAYOUT),{},{onValuesChange:function(){x()},children:(0,e.jsxs)(V.Z,{gutter:[8,8],children:[(0,e.jsx)(P.Z,{span:6,children:(0,e.jsx)(u.Z.Item,{label:"\u73AF\u5883",name:"env",children:(0,e.jsx)(v.Z,{placeholder:"\u9009\u62E9\u73AF\u5883",allowClear:!0,children:b.map(function(r){return(0,e.jsx)(h,{value:r.id,children:r.name},r.id)})})})}),(0,e.jsx)(P.Z,{span:6,children:(0,e.jsx)(u.Z.Item,{label:"\u540D\u79F0",name:"name",children:(0,e.jsx)(f.Z,{placeholder:"\u8F93\u5165redis\u540D\u79F0"})})}),(0,e.jsx)(P.Z,{span:6,children:(0,e.jsx)(u.Z.Item,{label:"\u5730\u5740",name:"addr",children:(0,e.jsx)(f.Z,{placeholder:"\u8F93\u5165redis\u5730\u5740"})})}),(0,e.jsx)(P.Z,{span:6,children:(0,e.jsx)(u.Z.Item,{label:"\u7C7B\u578B",name:"cluster",children:(0,e.jsxs)(v.Z,{placeholder:"\u9009\u62E9redis\u7C7B\u578B",allowClear:!0,children:[(0,e.jsx)(h,{value:!0,children:"\u96C6\u7FA4"}),(0,e.jsx)(h,{value:!1,children:"\u5B9E\u4F8B"})]})})})]})})),(0,e.jsxs)(z.ZP,{type:"primary",style:{marginBottom:8},onClick:function(){M(!0),T({})},children:[(0,e.jsx)(J.Z,{}),"\u6DFB\u52A0\u914D\u7F6E"]}),(0,e.jsx)(G.Z,{title:"Redis\u914D\u7F6E",width:500,open:ne,onCancel:function(){return M(!1)},onOk:ie,children:(0,e.jsxs)(u.Z,t()(t()({form:F,initialValues:p},R.Z.LAYOUT),{},{children:[(0,e.jsx)(u.Z.Item,{label:"\u73AF\u5883",name:"env",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5BF9\u5E94\u73AF\u5883"}],children:(0,e.jsx)(v.Z,{placeholder:"\u9009\u62E9\u73AF\u5883",allowClear:!0,children:b.map(function(r){return(0,e.jsx)(h,{value:r.id,children:r.name},r.id)})})}),(0,e.jsx)(u.Z.Item,{label:"redis\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BF9\u5E94redis\u540D\u79F0"}],children:(0,e.jsx)(f.Z,{placeholder:"\u8F93\u5165redis\u540D\u79F0"})}),(0,e.jsx)(u.Z.Item,{label:"\u5730\u5740",name:"addr",rules:[{required:!0,message:"\u8F93\u5165redis\u8FDE\u63A5\u5730\u5740\uFF0C\u96C6\u7FA4\u7528\u82F1\u6587\u9017\u53F7\u9694\u5F00"}],children:(0,e.jsx)(f.Z,{placeholder:"\u8F93\u5165redis\u8FDE\u63A5\u5730\u5740, \u96C6\u7FA4\u7528\u82F1\u6587\u9017\u53F7\u9694\u5F00"})}),(0,e.jsx)(u.Z.Item,{label:"\u7528\u6237\u540D",name:"username",rules:[{required:!1,message:"\u8F93\u5165redis\u7528\u6237\u540D"}],children:(0,e.jsx)(f.Z,{placeholder:"\u8F93\u5165redis\u7528\u6237\u540D"})}),(0,e.jsx)(u.Z.Item,{label:"\u5BC6\u7801",name:"password",rules:[{required:!1,message:"\u8F93\u5165redis\u5BC6\u7801"}],children:(0,e.jsx)(f.Z,{placeholder:"\u8F93\u5165redis\u5BC6\u7801"})}),(0,e.jsx)(u.Z.Item,{label:"db",name:"db",rules:[{required:!1,message:"\u8F93\u5165redis\u5BC6\u7801"}],children:(0,e.jsx)(Y.Z,{placeholder:"\u8F93\u5165db\uFF0C\u9ED8\u8BA4\u4E3A0(\u96C6\u7FA4\u4E0D\u9700\u8981db)",style:{width:"100%"}})}),(0,e.jsx)(u.Z.Item,{label:"\u7C7B\u578B",name:"cluster",rules:[{required:!0,message:"\u9009\u62E9redis\u7C7B\u578B"}],children:(0,e.jsxs)(v.Z,{placeholder:"\u9009\u62E9redis\u7C7B\u578B",children:[(0,e.jsx)(h,{value:!0,children:"\u96C6\u7FA4"}),(0,e.jsx)(h,{value:!1,children:"\u5B9E\u4F8B"})]})})]}))}),(0,e.jsx)(w.Z,{columns:ae,dataSource:k,rowKey:function(a){return a.id},loading:X.effects["gconfig/listRedisConfig"]})]})})};c.default=(0,H.connect)(function(A){var j=A.gconfig,O=A.loading;return{gconfig:j,loading:O}})(Q)}}]);
